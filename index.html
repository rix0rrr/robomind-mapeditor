<!doctype html>
<html>
    <head>
        <meta charset="utf-8"> 
        <title>RoboMind Map Editor</title>

        <link rel="stylesheet" href="bower_components/bootstrap-css/css/bootstrap.min.css">
        <link rel="stylesheet" href="robomind-mapeditor.css">
    </head>
    <body>
        <nav class="navbar navbar-default navbar-static-top navbar-inverse" role="navigation">
            <div class="navbar-header">
                <a class="navbar-brand" href="#">RoboMindMap</a>
            </div>
            <ul class="nav navbar-nav">
                <li data-bind="css: { active: page() == 'edit' }"><a href="#" data-bind="click: toEdit">Edit</a></li>
                <li data-bind="css: { active: page() == 'load' }"><a href="#" data-bind="click: toLoad">Load</a></li>
                <li data-bind="css: { active: page() == 'save' }"><a href="#" data-bind="click: toSave">Save</a></li>
            </ul>
        </nav>

        <!-- Edit Screen -->
        <div data-bind="visible: page() == 'edit'">
            <div class="panel editor-position">
                <div class="panel-heading">
                    <h2 class="panel-title">Preview</h2>
                </div>
                <div class="panel-body panel-fitting">
                    <div class="editor" data-bind="attr: { style: editor.outerCssStyle }, css: { 'action-paint': leftMouseFunction() == 'paint', 'action-pan': leftMouseFunction() == 'pan' }">
                        <div class="editor-inner" data-bind="attr: { style: editor.innerCssStyle }, foreach: editor.mapTiles">
                            <div data-bind="attr: { style: cssStyle }"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="palette-position">
                <div class="btn-group-vertical btn-group-lg">
                    <button class="btn btn-default" data-bind="click: editor.zoomIn"><span class="glyphicon glyphicon-zoom-in"></span></button>
                    <button class="btn btn-default" data-bind="click: editor.zoomOut"><span class="glyphicon glyphicon-zoom-out"></span></button>
                </div>

                <div class="btn-group-vertical btn-group-lg">
                    <button class="btn btn-primary" data-bind="click: paint, css: { active: leftMouseFunction() == 'paint' }"><span class="glyphicon glyphicon-pencil"></span></button>
                    <button class="btn btn-primary" data-bind="click: pan, css: { active: leftMouseFunction() == 'pan' }"><span class="glyphicon glyphicon-move"></span></button>
                </div>

                <br>

                <div class="panel">
                    <div class="panel-heading">
                        <h2 class="panel-title">Terrain</h2>
                    </div>
                    <div class="panel-body palette" data-bind="foreach: palette.toolsMenu">
                        <div class="tool" data-bind="attr: { style: cssStyle }, click: select, css: { selected: selected }"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Load Screen -->
        <div data-bind="visible: page() == 'load'" class="container">
            <div class="row">
                <div class="col-md-8 col-md-offset-2 text-column">
                    <h2><span class="glyphicon glyphicon-cloud-upload"></span> Load</h2>

                    <p>Select a RoboMind <tt>.map</tt> file to load, or
                    copy and paste the contents of a <tt>.map</tt> into
                    the text box.</p>

                    <h3>From File</h3>

                    <div data-bind="if: mapFile.fileApisAvailable">
                        <form role="form" data-bind="submit: mapFile.loadFromFile">
                            <div class="form-group">
                                <input type="file" id="loadMapFile">
                            </div>
                            <div class="form-group">
                                <input type="submit" class="btn btn-primary" value="Load">
                            </div>
                        </form>
                    </div>
                    <div data-bind="ifnot: mapFile.fileApisAvailable">
                        <p>Unfortunately, your browser does support the HTML5 
                        File API. Please copy and paste the contents of your <tt>.map</tt>
                        file manually into the text box below.</p>
                    </div>

                    <h3>From Text</h3>

                    <p>Copy the contents of the .map file here:</p>

                    <form role="form" data-bind="submit: mapFile.loadFromText">
                        <div class="form-group">
                            <textarea data-bind="value: mapFile.textArea" id="loadMapText" class="form-control" rows="8"></textarea>
                        </div>
                        <div class="form-group">
                            <input type="submit" class="btn btn-primary" value="Load">
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Save Screen -->
        <div data-bind="visible: page() == 'save'" class="container">
            <div class="row">
                <div class="col-md-8 col-md-offset-2 text-column">
                    <h2><span class="glyphicon glyphicon-cloud-download"></span> Save</h2>
                </div>
            </div>
        </div>

        <!-- Libs -->
        <script src="bower_components/jquery/jquery.min.js"></script>
        <script src="bower_components/knockout.js/knockout.js"></script>
        <script src="bower_components/underscore/underscore-min.js"></script>
        <script src="bower_components/json2/json2.js"></script>
        <script src="bower_components/base64/base64.min.js"></script>
        <script src="bower_components/LZMA-JS/src/lzma_worker.js"></script>
        <script src="bower_components/bootstrap-css/js/bootstrap.min.js"></script>
        <script src="bower_components/sylvester/sylvester.js"></script>
        <!-- App -->
        <script src="Palette.js"></script>
        <script src="Map.js"></script>
        <script src="MapFile.js"></script>
        <script src="MapTile.js"></script>
        <script src="Editor.js"></script>
        <script src="App.js"></script>
        <script src="Tool.js"></script>
        <script src="util.js"></script>
        <script src="robomind-mapeditor.js"></script>
    </body>
</html>
