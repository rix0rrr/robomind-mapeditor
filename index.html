<!doctype html>
<html>
    <head>
        <meta charset="utf-8"> 
        <title>RoboMind Map Editor</title>

        <link rel="stylesheet" href="bower_components/bootstrap-css/css/bootstrap.min.css">
        <link rel="stylesheet" href="robomind-mapeditor.css">
    </head>
    <body>
        <nav class="navbar navbar-default navbar-static-top navbar-inverse" role="navigation">
            <div class="navbar-header">
                <a class="navbar-brand" href="#" data-bind="click: toEdit">RoboMindMap</a>
            </div>
            <ul class="nav navbar-nav">
                <li data-bind="css: { active: page() == 'edit' }"><a href="#" data-bind="click: toEdit">Edit</a></li>
                <li data-bind="css: { active: page() == 'load' }"><a href="#" data-bind="click: toLoad">Load</a></li>
                <li data-bind="css: { active: page() == 'save' }"><a href="#" data-bind="click: toSave">Save</a></li>
            </ul>

            <!-- Theme dropdown button -->
            <div class="btn-group navbar-right" style="margin-right: 10px;">
                <button type="button" class="btn btn-default navbar-btn dropdown-toggle" data-toggle="dropdown"><span data-bind="text: skin().text"></span> theme <span class="caret"></span></button>
                <ul class="dropdown-menu" role="menu" data-bind="foreach: skins">
                    <li><a href="#" data-bind="click: function() { $parent.skin($data) }">
                        <span style="width: 1em;" class="glyphicon" data-bind="css: { 'glyphicon-ok' : $parent.skin() == $data }"></span>
                        <span data-bind="text: text"></span>
                    </a></li>
                </ul>
            </div>
        </nav>

        <!-- Edit Screen -->
        <div data-bind="visible: page() == 'edit'">
            <div class="panel editor-position">
                <div class="panel-heading">
                    <h2 class="panel-title">Preview</h2>
                </div>
                <div class="panel-body panel-fitting">
                    <div class="editor" data-bind="attr: { style: editor.outerCssStyle }, css: { 'action-paint': leftMouseFunction() == 'paint', 'action-pan': leftMouseFunction() == 'pan' }">
                        <div class="editor-inner" data-bind="attr: { style: editor.innerCssStyle }, foreach: editor.mapTiles">
                            <div data-bind="attr: { style: cssStyle }"></div>
                        </div>

                        <div class="btn-group-vertical top-right">
                            <button class="btn btn-default" data-bind="click: editor.zoomIn"><span class="glyphicon glyphicon-zoom-in"></span></button>
                            <button class="btn btn-default" data-bind="click: editor.zoomOut"><span class="glyphicon glyphicon-zoom-out"></span></button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="palette-position">
                <div class="btn-group-vertical btn-group-lg">
                    <button class="btn btn-primary" data-bind="click: paint, css: { active: leftMouseFunction() == 'paint' }"><span class="glyphicon glyphicon-pencil"></span> Paint</button>
                    <button class="btn btn-primary" data-bind="click: pan, css: { active: leftMouseFunction() == 'pan' }"><span class="glyphicon glyphicon-move"></span> Pan</button>
                </div>

                <br>

                <div class="panel">
                    <div class="panel-heading">
                        <h2 class="panel-title">Toolbox</h2>
                    </div>
                    <div class="panel-body palette">
                        <table>
                            <tr>
                                <td data-bind="with: palette.toolBtn('tile-A')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-O')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-P')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-Q')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('remove')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                            </tr>
                            <tr>
                                <td data-bind="with: palette.toolBtn('tile-C')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-H')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-D')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-M')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-J')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                            </tr>
                            <tr>
                                <td data-bind="with: palette.toolBtn('tile-G')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-N')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-I')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-L')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-K')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                            </tr>
                            <tr>
                                <td data-bind="with: palette.toolBtn('tile-B')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-F')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-E')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                            </tr>
                            <tr>
                                <td data-bind="with: palette.toolBtn('tile-@')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                                <td data-bind="with: palette.toolBtn('tile-R')"><div class="tool" data-bind="css: { selected: selected }"><div class="tool-inner" data-bind="attr: { style: cssStyle }, click: select"></div></div></td>
                            </tr>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Load Screen -->
        <div data-bind="visible: page() == 'load'" class="container">
            <div class="row">
                <div class="col-md-8 col-md-offset-2 text-column">
                    <h2><span class="glyphicon glyphicon-cloud-upload"></span> Load</h2>

                    <p>Select a RoboMind <tt>.map</tt> file to load, or
                    copy and paste the contents of a <tt>.map</tt> into
                    the text box.</p>

                    <h3>From file</h3>

                    <div data-bind="if: mapFile.fileApisAvailable">
                        <form role="form" data-bind="submit: mapFile.loadFromFile">
                            <div class="form-group">
                                <input type="file" id="loadMapFile">
                            </div>
                            <div class="form-group">
                                <input type="submit" class="btn btn-primary" value="Load">
                            </div>
                        </form>
                    </div>
                    <div data-bind="ifnot: mapFile.fileApisAvailable">
                        <p>Unfortunately, your browser does support the HTML5 
                        File API. Please copy and paste the contents of your <tt>.map</tt>
                        file manually into the text box below.</p>
                    </div>

                    <h3>From text</h3>

                    <p>Copy the contents of the .map file here:</p>

                    <form role="form" data-bind="submit: mapFile.loadFromText">
                        <div class="form-group">
                            <textarea data-bind="value: mapFile.textArea" id="loadMapText" class="form-control" rows="8"></textarea>
                        </div>
                        <div class="form-group">
                            <input type="submit" class="btn btn-primary" value="Load">
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- Save Screen -->
        <div data-bind="visible: page() == 'save'" class="container">
            <div class="row">
                <div class="col-md-8 col-md-offset-2 text-column">
                    <h2><span class="glyphicon glyphicon-cloud-download"></span> Save</h2>

                    <p>Download the current map as a file, or copy its contents.</p>

                    <h3>Download as file</h3>

                    <a class="btn btn-default" download="robomindmap.map" data-bind="attr: { href: 'data:application/octet-stream,' + mapFile.saveRepresentationEncoded() }">Download</a>

                    <h3>Copy as text</h3>

                    <p>Copy the following to a text file with the extension
                    <tt>.map</tt>, and be sure to save the file with the UCS-2
                    or UTF-16 encoding.</p>

                    <textarea data-bind="value: mapFile.saveRepresentation" rows="8" class="form-control readonly" readonly></textarea>
                </div>
            </div>
        </div>

        <!-- Libs -->
        <script src="bower_components/jquery/jquery.min.js"></script>
        <script src="bower_components/knockout.js/knockout.js"></script>
        <script src="bower_components/underscore/underscore-min.js"></script>
        <script src="bower_components/json2/json2.js"></script>
        <script src="bower_components/base64/base64.min.js"></script>
        <script src="bower_components/LZMA-JS/src/lzma_worker.js"></script>
        <script src="bower_components/bootstrap-css/js/bootstrap.min.js"></script>
        <script src="bower_components/sylvester/sylvester.js"></script>
        <!-- App -->
        <script src="Palette.js"></script>
        <script src="Map.js"></script>
        <script src="MapFile.js"></script>
        <script src="MapTile.js"></script>
        <script src="Editor.js"></script>
        <script src="App.js"></script>
        <script src="Tool.js"></script>
        <script src="util.js"></script>
        <script src="robomind-mapeditor.js"></script>
    </body>
</html>
